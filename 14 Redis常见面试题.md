## Redis 常见面试题

**问题**

```abap
Redis vs Memcached 
Redis支持的数据类型？
Redis有哪几种数据淘汰策略？
什么是Redis持久化？Redis有哪几种持久化方式？优缺点是什么？
Redis 有哪些架构模式？讲讲各自的特点？
使用过Redis分布式锁吗，它是怎么实现的？ 
使用过Redis做异步队列吗，你是怎么用的？有什么缺点？
什么是缓存穿透？如何避免？什么是缓存雪崩？何如避免？
```

**部分回答 —— 未作答的地方参见前面文章**

* Redi s Vs Memcached 

```
总的来说，可以把Redis理解为是对Memcached的拓展，是更加重量级的实现，提供了更多更强大的功能。
具体来说： 
	1.性能上：性能上都很出色，具体到细节，由于Redis只使用单核，而Memcached可以使用多核，所以平均每一个核上Redis在存储小数据时比Memcached性能更高。而在100k以上的数据中，Memcached性能要高于Redis，虽然Redis最近也在存储大数据的性能上进行优化，但是比起Memcached，还是稍有逊色。 
	2.内存空间和数据量大小：MemCached可以修改最大内存，采用LRU算法。Redis增加了VM的特性，突破了物理内存的限制。 
	3.操作便利上：MemCached数据结构单一，仅用来缓存数据，而Redis支持更加丰富的数据类型，也可以在服务器端直接对数据进行丰富的操作,这样可以减少网络IO次数和数据体积。 
	4.可靠性上：MemCached不支持数据持久化，断电或重启后数据消失，但其稳定性是有保证的。Redis支持数据持久化和数据恢复，允许单点故障，但是同时也会付出性能的代价。
```

* 什么是缓存穿透？如何避免？什么是缓存雪崩？何如避免？

```
缓存穿透:
访问一个不存在的key，缓存不起作用，请求会穿透到DB，流量大时DB会挂掉。 
解决方案：采用布隆过滤器，使用一个足够大的bitmap，用于存储可能访问的key，不存在的key直接被过滤。 

缓存雪崩:
大量的key设置了相同的过期时间，导致在缓存在同一时刻全部失效，造成瞬时DB请求量大、压力骤增，引起雪崩。 
解决方案：给缓存设置过期时间时加上一个随机值时间，使得每个key的过期时间分布开来，不会集中在同一时刻失效。 

缓存击穿: 
一个存在的key，在缓存过期的一刻，同时有大量的请求，这些请求都会击穿到DB，造成瞬时DB请求量大、压力骤增。 
解决方案：在访问key之前，采用SETNX（set if not exists）来设置另一个短期key来锁住当前key的访问，访问结束再删除该短期key。
```



